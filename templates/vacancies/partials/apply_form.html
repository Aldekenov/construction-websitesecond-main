{% load i18n %}

<form method="post"
      enctype="multipart/form-data"
      hx-post="{% url 'vacancies:apply' vacancy.slug %}"
      hx-target="#apply-result"
      hx-swap="innerHTML"
      class="space-y-4">
  {% csrf_token %}

  {% if form.non_field_errors %}
    <div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-800">
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "ФИО" %}</label>
    <input type="text" name="{{ form.full_name.name }}"
           value="{{ form.full_name.value|default_if_none:'' }}"
           class="w-full px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
           placeholder="{% trans 'Например: Иванов Иван' %}" required>
    {% if form.full_name.errors %}
      <div class="mt-1 text-xs text-red-600">{{ form.full_name.errors }}</div>
    {% endif %}
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Телефон" %}</label>
    <input type="text" name="{{ form.phone.name }}"
           value="{{ form.phone.value|default_if_none:'' }}"
           class="w-full px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
           placeholder="{% trans '+7 (___) ___-__-__' %}">
    {% if form.phone.errors %}
      <div class="mt-1 text-xs text-red-600">{{ form.phone.errors }}</div>
    {% endif %}
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Email" %}</label>
    <input type="email" name="{{ form.email.name }}"
           value="{{ form.email.value|default_if_none:'' }}"
           class="w-full px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
           placeholder="name@email.com" required>
    {% if form.email.errors %}
      <div class="mt-1 text-xs text-red-600">{{ form.email.errors }}</div>
    {% endif %}
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Сопроводительное письмо" %}</label>
    <textarea name="{{ form.cover_letter.name }}" rows="4"
              class="w-full px-3 py-2 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="{% trans 'Коротко расскажите о себе и опыте…' %}">{{ form.cover_letter.value|default_if_none:'' }}</textarea>
    {% if form.cover_letter.errors %}
      <div class="mt-1 text-xs text-red-600">{{ form.cover_letter.errors }}</div>
    {% endif %}
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">{% trans "Резюме (файл)" %}</label>

    <div class="rounded-xl border border-dashed border-gray-300 bg-gray-50 p-4">
      <input type="file" name="{{ form.resume.name }}"
             class="block w-full text-sm text-gray-700
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-lg file:border-0
                    file:text-sm file:font-semibold
                    file:bg-gray-900 file:text-white
                    hover:file:bg-black
                    transition"
             accept=".pdf,.doc,.docx" required>
      <div class="mt-2 text-xs text-gray-500">
        {% trans "Допустимые форматы: PDF, DOC, DOCX. Максимум 10 МБ." %}
      </div>
    </div>

    {% if form.resume.errors %}
      <div class="mt-1 text-xs text-red-600">{{ form.resume.errors }}</div>
    {% endif %}
  </div>

  <button type="submit"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl transition-colors btn-glow">
    {% trans "Отправить" %}
  </button>
</form>