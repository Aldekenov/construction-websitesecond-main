{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ vacancy.title }} | {% trans "Вакансии" %} | {{ block.super }}{% endblock %}

{% block content %}
<style>
    .vacancy-rich ul {
    list-style: disc;
    padding-left: 1.25rem; /* 20px */
    margin: 0.75rem 0;
    }
    .vacancy-rich ol {
    list-style: decimal;
    padding-left: 1.25rem;
    margin: 0.75rem 0;
    }
    .vacancy-rich li {
    margin: 0.25rem 0;
    }
    .vacancy-rich p {
    margin: 0.75rem 0;
    }
</style>
<section class="bg-gray-50">
  <!-- Header -->
  <div class="bg-white border-b border-gray-100">
    <div class="max-w-6xl mx-auto px-4 py-10">
      <div class="mb-4">
        <a href="{% url 'vacancies:list' %}" class="text-blue-600 hover:underline">
          &larr; {% trans "Все вакансии" %}
        </a>
      </div>

      <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6">
        <div class="max-w-3xl">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900" data-aos="fade-up">
            {{ vacancy.title }}
          </h1>

          <div class="mt-4 flex flex-wrap gap-2 text-sm text-gray-700" data-aos="fade-up" data-aos-delay="100">
            {% if vacancy.location %}
              <span class="inline-flex items-center gap-2 rounded-xl bg-gray-100 px-4 py-2">
                <i class="fa-solid fa-location-dot text-gray-500 text-[14px] leading-none"></i>
                {{ vacancy.location }}
              </span>
            {% endif %}

            {% if vacancy.employment %}
              <span class="inline-flex items-center rounded-xl bg-blue-50 text-blue-700 px-4 py-2 font-medium">
                {{ vacancy.employment }}
              </span>
            {% endif %}

            <span class="inline-flex items-center gap-2 rounded-xl bg-gray-100 px-4 py-2">
              <svg class="h-4 w-4 text-gray-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1z"/>
              </svg>
              {{ vacancy.created_at|date:"d.m.Y" }}
            </span>
          </div>
        </div>

        <div class="flex gap-3">
          <a href="#apply"
             class="inline-flex items-center justify-center rounded-xl bg-gray-900 text-white px-5 py-3 hover:bg-black transition"
             data-aos="fade-up" data-aos-delay="150">
            {% trans "Откликнуться" %}
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="max-w-6xl mx-auto px-4 py-12">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Left: vacancy content -->
      <div class="lg:col-span-2 space-y-6">
        {% if vacancy.description %}
          <div class="bg-white rounded-2xl shadow-lg p-6" data-aos="fade-up">
            <h2 class="text-xl font-semibold text-gray-900">{% trans "Описание" %}</h2>
            <div class="prose max-w-none mt-4 text-gray-700 vacancy-rich">
              {{ vacancy.description|safe }}
            </div>
          </div>
        {% endif %}

        {% if vacancy.requirements %}
          <div class="bg-white rounded-2xl shadow-lg p-6" data-aos="fade-up" data-aos-delay="100">
            <h2 class="text-xl font-semibold text-gray-900">{% trans "Требования" %}</h2>
            <div class="prose max-w-none mt-4 text-gray-700 vacancy-rich">
              {{ vacancy.requirements|safe }}
            </div>
          </div>
        {% endif %}

        {% if vacancy.conditions %}
          <div class="bg-white rounded-2xl shadow-lg p-6" data-aos="fade-up" data-aos-delay="150">
            <h2 class="text-xl font-semibold text-gray-900">{% trans "Условия" %}</h2>
            <div class="prose max-w-none mt-4 text-gray-700 vacancy-rich">
              {{ vacancy.conditions|safe }}
            </div>
          </div>
        {% endif %}
      </div>

      <!-- Right: apply form -->
      <aside class="lg:col-span-1">
        <div id="apply" class="bg-white rounded-2xl shadow-lg p-6 sticky top-24" data-aos="fade-up">
          <div class="flex items-start justify-between gap-3">
            <div>
              <h2 class="text-xl font-semibold text-gray-900">{% trans "Отклик на вакансию" %}</h2>
              <p class="text-sm text-gray-600 mt-1">
                {% trans "Заполните форму и прикрепите резюме (PDF/DOC/DOCX)." %}
              </p>
            </div>
          </div>

          <div id="apply-result" class="mt-5">
            {% include "vacancies/partials/apply_form.html" %}
          </div>

          <div class="mt-6 text-xs text-gray-500">
            {% trans "Нажимая «Отправить», вы соглашаетесь на обработку персональных данных." %}
          </div>
        </div>
      </aside>
    </div>
  </div>
</section>
{% endblock %}