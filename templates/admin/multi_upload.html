{% extends "admin/base_site.html" %}
{% block content %}

<h1>Массовая загрузка изображений</h1>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  <label>Категория:</label><br>
  <select name="category" required>
    {% for cat in categories %}
      <option value="{{ cat.id }}">{{ cat.title }}</option>
    {% endfor %}
  </select>

  <br><br>

  <label>Проект (необязательно):</label><br>
  <select name="project" id="project-select">
    <option value="">— Корпоративные / без проекта —</option>
    {% for p in projects %}
      <option value="{{ p.id }}">{{ p.title }}</option>
    {% endfor %}
  </select>

  <br><br>

  <div id="year-block">
    <label>Год (если без проекта):</label><br>
    <input type="number" name="project_year" min="1990" max="2100">
    <br><br>
  </div>

  <label>Фотографии:</label><br>
  <input type="file" name="images" multiple required>

  <br><br>
  <button type="submit" class="default">Загрузить</button>
</form>

<script>
  const projectSelect = document.getElementById("project-select");
  const yearBlock = document.getElementById("year-block");

  function toggleYear() {
    yearBlock.style.display = projectSelect.value ? "none" : "block";
  }

  projectSelect.addEventListener("change", toggleYear);
  toggleYear();
</script>

{% endblock %}